<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>åœ¨Ubuntuä¸­æ­å»ºä½ çš„MCæœåŠ¡å™¨â€”â€”åŸºäºDocker</title>
    <url>/posts/bc472a12/</url>
    <content><![CDATA[<p><s>MCè¶…å¥½ç©çš„ï¼Œè°ä¼šæ‹’ç»æœ‰è¶£çš„çº¢çŸ³æï¼Ÿ</s></p>
<p>æœ¬æ–‡ä¸»è¦è®°å½•ä¸€ç§åœ¨UbuntuæœåŠ¡å™¨ä¸­ä¾¿æ·åœ°æ­å»ºMCæœåŠ¡å™¨çš„æ–¹æ³•ã€‚</p>
<span id="more"></span>
<h2 id="æ­å»ºç¯å¢ƒ">æ­å»ºç¯å¢ƒ</h2>
<ul>
<li>Ubuntu 21.10 (GNU/Linux 5.13.0-39-generic x86_64)</li>
<li>Docker version 20.10.14, build a224086</li>
<li>Docker Image: itzg/minecraft-server:latest</li>
</ul>
<h2 id="å‰ç½®ï¼šDocker-å®‰è£…">å‰ç½®ï¼šDocker å®‰è£…</h2>
<p>è¯¦ç»†å†…å®¹å¯å‚è€ƒ<a href="https://docs.docker.com/engine/install/ubuntu/">Dockerå®˜æ–¹æ–‡æ¡£</a>ï¼Œå¦‚æœä¸å®³æ€•è‹±æ–‡çš„è¯ã€‚</p>
<p>æ³¨æ„ï¼Œä»¥ä¸‹çš„æ–¹æ¡ˆå‡éœ€è¦æœåŠ¡å™¨sudoæƒé™ï¼Œ</p>
<h3 id="æ‡’äººæ–¹æ¡ˆâ€”â€”ä½¿ç”¨è„šæœ¬">æ‡’äººæ–¹æ¡ˆâ€”â€”ä½¿ç”¨è„šæœ¬</h3>
<blockquote>
<p>Docker provides a convenience script at <a href="http://get.docker.com">get.docker.com</a> to install Docker into development environments quickly and non-interactively. <strong>The convenience script is not recommended for production environments</strong>, but can be used as an example to create a provisioning script that is tailored to your needs.</p>
</blockquote>
<p>åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">curl -fsSL https://get.docker.com -o get-docker.sh</span><br><span class="line">sudo sh get-docker.sh</span><br></pre></td></tr></table></figure>
<p>ç„¶åç­‰ä¸€ä¼šå°±å¥½äº†ã€‚</p>
<h3 id="æ‰‹åŠ¨æ–¹æ¡ˆâ€”â€”ä»å®˜æ–¹ä»“åº“ä¸‹è½½">æ‰‹åŠ¨æ–¹æ¡ˆâ€”â€”ä»å®˜æ–¹ä»“åº“ä¸‹è½½</h3>
<h4 id="é…ç½®ä»“åº“">é…ç½®ä»“åº“</h4>
<ol>
<li>ä¸‹è½½å‰ç½®åŒ…å¹¶æ·»åŠ Dockerå®˜æ–¹GPGå…¬é’¥</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install \</span><br><span class="line">    ca-certificates \</span><br><span class="line">    curl \</span><br><span class="line">    gnupg \</span><br><span class="line">    lsb-release</span><br><span class="line">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>æ·»åŠ Dockerç¨³å®šç‰ˆä»“åº“</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> \</span><br><span class="line">  <span class="string">&quot;deb [arch=<span class="subst">$(dpkg --print-architecture)</span> signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \</span></span><br><span class="line"><span class="string">  <span class="subst">$(lsb_release -cs)</span> stable&quot;</span> | sudo <span class="built_in">tee</span> /etc/apt/sources.list.d/docker.list &gt; /dev/null</span><br></pre></td></tr></table></figure>
<h4 id="ä¸‹è½½Docker">ä¸‹è½½Docker</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure>
<p>éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸï¼š</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo docker run hello-world</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæˆåŠŸåˆ™å¯ä»¥çœ‹åˆ°å¦‚ä¸‹æˆªå›¾ï¼š</p>
<p><img src="/posts/bc472a12/pic_1649234026617.png" alt="å›¾ 1"></p>
<h2 id="åœ¨Dockerä¸­éƒ¨ç½²Minecraft-Server">åœ¨Dockerä¸­éƒ¨ç½²Minecraft Server</h2>
<p>è¿™é‡Œä½¿ç”¨ä¸€ä¸ªç”±itzgä»¥åŠå…¶ä½™ç™¾ä½å¤§ä½¬å…±åŒç»´æŠ¤çš„ä¸€ä¸ªDockeré•œåƒï¼š<a href="https://hub.docker.com/r/itzg/minecraft-server">minecraft-server</a>ï¼ˆ<a href="https://github.com/itzg/docker-minecraft-server">Githubåœ°å€</a>ï¼‰</p>
<p>åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼ˆæ³¨æ„ä¿®æ”¹éƒ¨åˆ†å‚æ•°ä»¥ç¬¦åˆä½ çš„éœ€æ±‚ï¼‰ï¼š</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker run \</span><br><span class="line">    -d -it \ <span class="comment"># åå°è¿è¡Œå®¹å™¨ï¼Œä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨å¹¶ä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯</span></span><br><span class="line">    -p 25565:25565 \ <span class="comment"># å®¿ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£</span></span><br><span class="line">    --name=mcserver \ <span class="comment"># å®¹å™¨åç§°ï¼Œä¾¿äºåç»­ç®¡ç†</span></span><br><span class="line">    --<span class="built_in">env</span>=EXEC_DIRECTLY=<span class="literal">true</span> \ <span class="comment"># å…è®¸docker attachæ˜¾ç¤ºå½©è‰²è¾“å‡º</span></span><br><span class="line">    --<span class="built_in">env</span>=EULA=TRUE \ <span class="comment"># æ¥å—EULAåè®®</span></span><br><span class="line">    --<span class="built_in">env</span>=VERSION=1.18.2 \ <span class="comment"># æŒ‡å®šæ¸¸æˆç‰ˆæœ¬ä¸º1.18.2ï¼Œé»˜è®¤ä½¿ç”¨æœ€æ–°ç‰ˆ</span></span><br><span class="line">    --<span class="built_in">env</span>=TZ=Asia/Shanghai \ <span class="comment"># mcæœåŠ¡å™¨æ—¥å¿—æ—¶åŒº</span></span><br><span class="line">    --<span class="built_in">env</span>=TYPE=PAPER \ <span class="comment"># æœåŠ¡å™¨æ ¸å¿ƒç±»å‹</span></span><br><span class="line">    --<span class="built_in">env</span>=MEMORY=4G \ <span class="comment"># æŒ‡å®šå†…å­˜é™åˆ¶</span></span><br><span class="line">    --<span class="built_in">env</span>=LOG_TIMESTAMP=<span class="literal">true</span> \ <span class="comment"># åœ¨æ—¥å¿—ä¸­è®°å½•æ—¶é—´æˆ³</span></span><br><span class="line">    --volume=/foo/bar:/data \ <span class="comment"># å®¿ä¸»æœºå­˜å‚¨ç›®å½•:å®¹å™¨å†…éƒ¨ç›®å½•ã€‚ä¿®æ”¹ä¸ºä½ çš„ç›®å½•ï¼</span></span><br><span class="line">    --restart=always \ <span class="comment"># å®¹å™¨åœæ­¢ä¾¿ç«‹å³é‡å¯</span></span><br><span class="line">    itzg/minecraft-server</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œåè€å¿ƒç­‰å¾…é•œåƒä¸‹è½½ä»¥åŠæ¸¸æˆæ ¸å¿ƒä¸‹è½½å³å¯ï¼Œå¦‚æœä¸‹è½½å‡ºç°é—®é¢˜å¯ä»¥åˆ é™¤å®¹å™¨åé‡æ–°è¿è¡Œã€‚</p>
<h2 id="MCæœåŠ¡å™¨ç®¡ç†">MCæœåŠ¡å™¨ç®¡ç†</h2>
<ul>
<li>æŸ¥çœ‹å®¹å™¨çŠ¶æ€</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure>
<ul>
<li>äº¤äº’å¼æ§åˆ¶</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -i mcserver rcon-cli</span><br></pre></td></tr></table></figure>
<ul>
<li>åªæ‰§è¡Œå•æ¡æŒ‡ä»¤ï¼ˆä¾‹å¦‚<code>stop</code>)ï¼š</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> mcserver rcon-cli stop</span><br></pre></td></tr></table></figure>
<ul>
<li>é™„åŠ åˆ°æœåŠ¡å™¨å‘½ä»¤è¡Œï¼š</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker attach mcserver</span><br></pre></td></tr></table></figure>
<p><em>é€€å‡ºæ–¹æ³•ï¼šä¾æ¬¡æŒ‰ä¸‹<code>Ctrl-p</code>ã€<code>Ctrl-q</code>ä»¥å®‰å…¨åœ°é€€å‡ºæœåŠ¡å™¨å‘½ä»¤è¡Œã€‚</em></p>
<ul>
<li>æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—ï¼š</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker logs mcserver</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>Ubuntu</tag>
        <tag>Docker</tag>
        <tag>Minecraft Server</tag>
      </tags>
  </entry>
  <entry>
    <title>WSL2å¤šå¼€Ubuntuå®ä¾‹</title>
    <url>/posts/90d3eb82/</url>
    <content><![CDATA[<p>æœ€è¿‘åœ¨æ£é¼“è½¯è·¯ç”±å’ŒOpenWrtï¼Œç»å¸¸éœ€è¦å¼€ä¸€ä¸ªLinuxç¯å¢ƒæ¥äº¤å‰ç¼–è¯‘å„ç§å›ºä»¶ï¼ˆæœ‰ä¸€è¯´ä¸€ï¼ŒæŒºæŠ˜è…¾äººçš„ ::&gt;_&lt;:: ä¸è¿‡ä¹ŸæŒºé”»ç‚¼äººçš„ï¼‰ã€‚è™½ç„¶è¯´å¯ä»¥åˆ›å»ºä¸ªlinuxè™šæ‹Ÿæœºæˆ–è€…dockerå®¹å™¨æ¥ç¼–è¯‘ï¼Œä½†ä¸ªäººè§‰å¾—è¿™äº›æ–¹æ¡ˆå¤ªâ€œé‡â€äº†ï¼Œæ­£å¥½å·¨ç¡¬æ•´äº†ä¸ª<strong>WSL2</strong>(Windows Subsystem for Linux)è¿™ä¹ˆä¸ªå¥½ä¸œè¥¿ï¼Œé‚£å½“ç„¶æ˜¯è¦å……åˆ†åˆ©ç”¨èµ·æ¥å•¦(ã€‚ãƒ»âˆ€ãƒ»)ãƒ</p>
<p>ç„¶è€Œç›®å‰çš„WSL<strong>å¹¶ä¸</strong>æ”¯æŒä¸ºä¸€ä¸ªå‘è¡Œç‰ˆï¼ˆæœ¬æ–‡ä»¥Ubuntuä¸ºä¾‹ï¼‰å¯åŠ¨å¤šä¸ªç¤ºä¾‹ï¼ˆä¹Ÿå°±æ˜¯å¤šå¼€ï¼‰ï¼Œæ‰€ä»¥ç›®å‰æˆ‘ä»¬åªèƒ½æ‰‹åŠ¨é…ç½®ã€‚TAT</p>
<span id="more"></span>
<h2 id="ä¸‹è½½-Ubuntu-WSL2-æœ€æ–°é•œåƒ">ä¸‹è½½ Ubuntu WSL2 æœ€æ–°é•œåƒ</h2>
<p>Ubuntu Server 22.04 LTS (Jammy Jellyfish) æœ€æ–°ç‰ˆæœ¬ï¼ˆæ¯æ—¥æ„å»ºï¼‰å¯ä»¥åœ¨<a href="https://cloud-images.ubuntu.com/wsl/jammy/current/ubuntu-jammy-wsl-amd64-wsl.rootfs.tar.gz">cloud-images.ubuntu.com</a>ä¸‹è½½ã€‚ä½†è€ƒè™‘åˆ°å›½å†…ç½‘ç»œç¯å¢ƒï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™ï¼ˆ<a href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu-cloud-images/wsl/jammy/current/ubuntu-jammy-wsl-amd64-wsl.rootfs.tar.gz">mirrors.tuna.tsinghua.edu.cn</a>ï¼‰ï¼ˆæˆ–è€…åˆ«çš„å›½å†…é•œåƒç«™ï¼‰ä¸‹è½½ã€‚</p>
<p>å‚è€ƒä¸‹è½½å‘½ä»¤:</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Invoke-WebRequest</span> <span class="literal">-Uri</span> <span class="string">&quot;https://mirrors.tuna.tsinghua.edu.cn/ubuntu-cloud-images/wsl/jammy/current/ubuntu-jammy-wsl-amd64-wsl.rootfs.tar.gz&quot;</span> <span class="literal">-OutFile</span> <span class="string">&quot;ubuntu-jammy-wsl-amd64-wsl.rootfs.tar.gz&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="å¯¼å…¥åˆ°WSL2ä¸­">å¯¼å…¥åˆ°WSL2ä¸­</h2>
<p>å¯¼å…¥å‘½ä»¤å¦‚ä¸‹æ‰€ç¤º</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">wsl <span class="literal">--import</span> &lt;DistroName&gt; &lt;InstallLocation&gt; &lt;InstallTarFile&gt;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ï¼š</p>
<ul>
<li><code>&lt;DistroName&gt;</code>ï¼šå®ä¾‹åç§°</li>
<li><code>&lt;InstallLocation&gt;</code>ï¼šå®ä¾‹å®‰è£…ä½ç½®</li>
<li><code>&lt;InstallTarFile&gt;</code>ï¼šå®‰è£…æ–‡ä»¶ä½ç½®</li>
</ul>
<p>ä»¥ä¸‹ä¸ºå‘½ä»¤ç¤ºä¾‹ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">wsl <span class="literal">--import</span> Ubuntu<span class="literal">-Example</span>  .\Ubuntu<span class="literal">-Example</span>\ .\ubuntu<span class="literal">-jammy-wsl-amd64-wsl</span>.rootfs.tar.gz</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹å®ä¾‹åå’Œå®‰è£…ä½ç½®å°±å¯ä»¥å®ç°å¤šå¼€è¾£ï¼</p>
<p>å¯¼å…¥æˆåŠŸåå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›å…¥åˆ›å»ºå¥½çš„Ubuntuå®ä¾‹ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">wsl <span class="literal">-d</span> &lt;DistroName&gt;</span><br></pre></td></tr></table></figure>
<h2 id="é…ç½®æ™®é€šç”¨æˆ·è´¦æˆ·">é…ç½®æ™®é€šç”¨æˆ·è´¦æˆ·</h2>
<p>åœ¨å®¹å™¨ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;Please enter username: &quot;</span> NEW_USER</span><br><span class="line">useradd -m -G sudo -s /bin/bash <span class="string">&quot;<span class="variable">$NEW_USER</span>&quot;</span></span><br><span class="line">passwd <span class="string">&quot;<span class="variable">$NEW_USER</span>&quot;</span></span><br><span class="line"><span class="built_in">tee</span> /etc/wsl.conf &lt;&lt;<span class="string">_EOF</span></span><br><span class="line"><span class="string">[user]</span></span><br><span class="line"><span class="string">default=$&#123;NEW_USER&#125;</span></span><br><span class="line"><span class="string">_EOF</span></span><br></pre></td></tr></table></figure>
<p>ç„¶åé€€å‡ºWSL2å®¹å™¨(Ctrl+D)ï¼Œåœ¨PowerShellä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wsl --terminate &lt;Distribution Name&gt;</span><br><span class="line">wsl -d &lt;Distribution Name&gt;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ä¾¿æ˜¯ä»¥æ™®é€šç”¨æˆ·è¿›è¡Œæ“ä½œå•¦~</p>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><a href="https://learn.microsoft.com/en-us/windows/wsl/use-custom-distro">https://learn.microsoft.com/en-us/windows/wsl/use-custom-distro</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn2" class="footnote-item"><p><a href="https://cloudbytes.dev/snippets/how-to-install-multiple-instances-of-ubuntu-in-wsl2">https://cloudbytes.dev/snippets/how-to-install-multiple-instances-of-ubuntu-in-wsl2</a> <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p>
</li>
</ol>
</section>
]]></content>
      <tags>
        <tag>Ubuntu</tag>
        <tag>WSL2</tag>
      </tags>
  </entry>
  <entry>
    <title>HELLO WORLD</title>
    <url>/posts/87e5865b/</url>
    <content><![CDATA[<p>è¿™æ˜¯Jesse Seniorçš„ç¬¬ä¸€æ¡åšå®¢ã€‚</p>
<p>æœ¬äººä¹‹åå¤§æ¦‚ä¼šåœ¨åšå®¢ä¸Šå†™ä¸€äº›è‡ªå·±æŠ˜è…¾çš„ç¬”è®°ï¼Œä¸»è¦ä¹Ÿæ˜¯ä¸ºäº†è®©ä¹‹åçš„äººå°‘èµ°å¼¯è·¯ï¼Œä¹Ÿæ˜¯å­¦ä¹ äº†é‚£ä¹ˆå¤šä»–äººçš„åšå®¢åè‡ªå·±æ‰€åšçš„è¡¥å¿å§ã€‚[ç¬‘]</p>
<p><img src="/posts/87e5865b/MISAKA.png" alt="ç†ç›´æ°”å£®"></p>
<p>æœ¬äººçš„æ–‡ç« å…¨éƒ¨é‡‡ç”¨<a href="https://creativecommons.org/licenses/by-sa/4.0/">CC-BY-SA-4.0</a>åè®®ï¼Œå€Ÿé‰´æœ¬äººçš„æ–‡ç« æ—¶è®°å¾—ä½¿ç”¨å¼•ç”¨æˆ–è€…æ·»åŠ è„šæ³¨ï¼Œæ¬è¿è®°å¾—åŠ åŸæ–‡é“¾æ¥ã€‚ï¼ˆåº”è¯¥æ²¡äººä¼šçœ‹æˆ‘çš„æ–‡ç« å§â€¦ï¼‰</p>
<p>åŒæ—¶æœ¬äººäº¦ä¼šåœ¨æ–‡ç« ä¸­å‡†ç¡®ç”³æ˜å‚è€ƒæ¥æºä¸é“¾æ¥ã€‚</p>
<p>è‡³äºä¸ºä»€ä¹ˆä½¿ç”¨<code>HELLO WORLD</code>ä½œä¸ºæ ‡é¢˜ï¼Œå¤§æ¦‚æ˜¯å› ä¸ºè¿™æ˜¯æˆ‘çš„ç¬¬ä¸€æ¡åšå®¢å§ï¼Œå°±åƒå­¦ä¹ ç¼–ç¨‹è¯­è¨€æ—¶ç”Ÿæˆçš„ç¬¬ä¸€æ¡è¾“å‡ºä¸€æ ·ï¼Œæ˜¯å¯¹è¿™ç‰‡æ–°ä¸–ç•Œçš„ç¬¬ä¸€å£°æ‹›å‘¼ã€‚</p>
<p>å¸Œæœ›æˆ‘èƒ½ä¸€ç›´ç»´æŠ¤è¿™ä¸ªåšå®¢åˆ°æ¯•ä¸šå§ã€‚</p>
<p>ä»¥ä¸Šï¼ŒåŠï¼Œ</p>
<hr>
<p><code>print(&quot;Hello World!&quot;)</code></p>
]]></content>
  </entry>
  <entry>
    <title>WSL2è¸©å‘è®°å½•</title>
    <url>/posts/6fc44b87/</url>
    <content><![CDATA[<p>ä½¿ç”¨WSLçš„è¿‡ç¨‹ä¸­æ€»æ˜¯é‡åˆ°å„ç§ç„å­¦é—®é¢˜ï¼Œå…¶ä¸­å¾ˆå¤šé—®é¢˜é‡åˆ°çš„æ¬¡æ•°è¿‡äºé¢‘ç¹ã€‚æˆ‘åœ¨è¿™é‡Œåšä¸€ä¸ªæ•´ç†ï¼Œå…å¾—ä¹‹åå†æ¬¡é‡åˆ°åŒæ ·çš„é—®é¢˜åˆå¾—è·‘åˆ°ç½‘ä¸Šä¸€é€šæŸ¥(ï¿£ï¹ƒï¿£)</p>
<h2 id="ç¦ç”¨appendWindowsPath">ç¦ç”¨appendWindowsPath</h2>
<p>ç¦ç”¨<code>appendWindowsPath</code>å¯ä»¥é¿å…éƒ¨åˆ†ç„å­¦ç¼–è¯‘é—®é¢˜ï¼ˆä¾‹å¦‚ç¼–è¯‘OpenWrtå›ºä»¶æ—¶ï¼Œå¦‚æœè·¯å¾„ä¸­å«æœ‰Windowsè·¯å¾„ï¼Œå¯èƒ½ä¼šæŠ¥<code>The relative path 'Files' is included in the PATH environment variable, which is insecure in combination with the -execdir action of find.  Please remove that entry from $PATH</code>ï¼‰<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
<p>åœ¨æ–‡ä»¶<code>/etc/wsl.conf</code>ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œé‡æ–°è¿›å…¥å®¹å™¨å³å¯ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[interop]</span><br><span class="line">appendWindowsPath = <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h2 id="libcuda-so-1-is-not-a-symbolic-link">libcuda.so.1 is not a symbolic link</h2>
<p>åœ¨æ–‡ä»¶<code>/etc/wsl.conf</code>ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œé‡å¯å®¹å™¨å³å¯<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[automount]</span><br><span class="line">ldconfig = <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<div class="note info"><p>è¯¥é—®é¢˜å­˜åœ¨å…¶ä»–è§£å†³æ–¹æ¡ˆï¼Œè¯·å‚è€ƒä»¥ä¸‹é“¾æ¥ï¼š</p>
<ul>
<li><a href="https://github.com/microsoft/WSL/issues/5548">https://github.com/microsoft/WSL/issues/5548</a></li>
<li><a href="https://github.com/microsoft/WSL/issues/5663">https://github.com/microsoft/WSL/issues/5663</a></li>
<li><a href="https://superuser.com/questions/1707681/wsl-libcuda-is-not-a-symbolic-link">https://superuser.com/questions/1707681/wsl-libcuda-is-not-a-symbolic-link</a></li>
</ul>
</div>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><a href="https://github.com/coolsnowwolf/lede/issues/6597#issuecomment-825314820">https://github.com/coolsnowwolf/lede/issues/6597#issuecomment-825314820</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn2" class="footnote-item"><p><a href="https://github.com/microsoft/WSL/issues/5548#issuecomment-724674428">https://github.com/microsoft/WSL/issues/5548#issuecomment-724674428</a> <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p>
</li>
</ol>
</section>
]]></content>
  </entry>
  <entry>
    <title>ä¿®å¤OpenWrtä¸‹ax88179èŠ¯ç‰‡USBç½‘å¡é‡å¯åå¤±æ•ˆé—®é¢˜</title>
    <url>/posts/57b22b2/</url>
    <content><![CDATA[<p>æœ‰çš„æ—¶å€™ï¼Œä¸æ¥ç‚¹å¤©ç¾äººç¥¸ï¼Œéƒ½ä¸çŸ¥é“è‡ªå·±ç»´æŠ¤çš„ç³»ç»Ÿæœ‰å¤šè„†å¼±ã€‚</p>
<span id="more"></span>
<p>èµ·å› æ˜¯å®¿èˆç”µè´¹ç”¨å®Œäº†ï¼Œå­¦æ ¡æ— æƒ…è‡ªåŠ¨æ‹‰é—¸ï¼Œç„¶åæˆ‘çš„è·¯ç”±å™¨ï¼ˆæ ‘è“æ´¾Rpi4bä¸Šè·‘çš„OpenWrtï¼‰å°±å…³æœºäº†ã€‚äº¤é’±ã€æ¢å¤ä¾›ç”µã€æ ‘è“æ´¾é‡å¯ï¼Œç„¶åLANå£ï¼ˆç”¨çš„ax88179èŠ¯ç‰‡USBç½‘å¡ï¼Œç®€å•ç²—æš´ğŸ¤£ï¼‰ä¾¿æ²¡ç½‘äº†ï¼ˆæŠ¥åº”ğŸ˜°ï¼‰ã€‚ä¸€å¼€å§‹è¿˜ä»¥ä¸ºæ˜¯APçš„é—®é¢˜ï¼Œæœ€åç»è¿‡ä¸€é€šæ’æŸ¥å‘ç°OpenWrtè®¤ä¸å‡ºæ¥USBç½‘å¡äº†ã€‚</p>
<p>æœ€ååœ¨StackExchangeä¸Šæ‰¾åˆ°äº†è§£å†³æ–¹æ³•<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ï¼š</p>
<ol>
<li>è·å–USBç½‘å¡IDï¼š</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">root@OpenWrt:~<span class="comment"># lsusb |grep AX88179</span></span><br><span class="line">Bus 002 Device 004: ID 0b95:1790 ASIX AX88179A</span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸Šæ‰€ç¤ºï¼ŒUSBç½‘å¡IDä¸º<code>0b95:1790</code></p>
<ol start="2">
<li>åœ¨OpenWrtç³»ç»Ÿå¯åŠ¨åï¼Œ<strong>å»¶æ—¶é‡ç½®</strong>USBç½‘å¡ï¼š</li>
</ol>
<p>ä¿®æ”¹<code>/etc/rc.local</code>å¹¶åœ¨<code>exit 0</code>å‰æ·»åŠ ä»¥ä¸‹å†…å®¹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sleep</span> 15</span><br><span class="line">usbreset 0b95:1790</span><br></pre></td></tr></table></figure>
<p>ä¸»æ‰“ä¸€ä¸ªç®€å•ç²—æš´ğŸ¤£ã€‚ï¼ˆå¹¸å¥½è·¯ç”±å™¨ä¸Šæå‰éƒ¨ç½²äº†åå‘ä»£ç†ï¼Œç»™ç»´ä¿®ç•™äº†åè·¯ï¼Œä¸ç„¶æ€•æ˜¯è¦å…¨éƒ¨æ¨å€’é‡æ¥ç½¢ã€‚ï¼‰</p>
<p>åç»­è°ƒæŸ¥å‘ç°è¿™ä¸ªé—®é¢˜ä¼¼ä¹æ˜¯å¯åŠ¨é¡ºåºå¯¼è‡´çš„<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>ï¼Œä½†æ¯•ç«Ÿé—®é¢˜å·²ç»â€œä¿®å¤â€äº†ï¼Œä¹Ÿå°±ä¸å†ç»§ç»­æ·±ç©¶ã€‚å¦‚æœå„ä½æ‰¾åˆ°äº†æ ¹æœ¬è§£å†³åŠæ³•ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºè¡¥å……ã€‚</p>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><a href="https://unix.stackexchange.com/a/640443">StackExchange: USB-Ethernet adapter stops working periodically, as if going to sleep</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn2" class="footnote-item"><p><a href="https://github.com/FreddyXin/ax88179_178a/issues/6#issuecomment-1208448522">Github Issue: Failed to write reg index</a> <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p>
</li>
</ol>
</section>
]]></content>
      <tags>
        <tag>OpenWrt</tag>
      </tags>
  </entry>
  <entry>
    <title>iCalendaræ—¥å†æ–‡ä»¶è£å‰ª</title>
    <url>/posts/2bef1db1/</url>
    <content><![CDATA[<p>ç”±äºäº†è§£åˆ°ä¹‹å‰éƒ¨ç½²çš„Radicale<a href="https://radicale.org/v3.html#oriented-to-calendar-and-contact-user-agents">ä¼¼ä¹å¹¶æœªä¸¥æ ¼éµå®ˆRFC 5545æ ‡å‡†</a>ï¼Œè€ŒRadicaleåœ¨è‹¹æœè®¾å¤‡ä¸Šè®¿é—®æ¯”è¾ƒéº»çƒ¦ï¼Œæ‰€ä»¥å‰æ®µæ—¶é—´å°è¯•å°†è‡ªå·±çš„æ—¥å†æœåŠ¡é‡æ–°éƒ¨ç½²åˆ°Baikalï¼ˆä½†äº‹åå‘ç°éƒ¨ç½²å˜å¾—æ›´éº»çƒ¦äº†TATï¼‰ï¼Œåœ¨å¤‡ä»½æ—¥å†æ–‡ä»¶çš„æ—¶å€™å‘ç°è‡ªå·±çš„æ—¥å†æ–‡ä»¶ä½“ç§¯å¤ªå¤§äº†ï¼Œä¾¿é¡ºæ‰‹æŠ½æ—¶é—´å†™äº†ä¸ªpythonè„šæœ¬æ¥åˆ‡å‰²æ—¥å†æ–‡ä»¶ã€‚</p>
<span id="more"></span>
<div class="note danger"><p>å‹æƒ…æç¤ºï¼šä½¿ç”¨è„šæœ¬å‰è¯·<strong>å¤‡ä»½</strong>ä½ çš„æ—¥å†æ–‡ä»¶</p>
</div>
<p>æœ¬è„šæœ¬ä¾èµ–<a href="https://github.com/collective/icalendar">icalendar</a>æ¨¡å—ã€‚å…¶ä½œç”¨ä¸»è¦æ˜¯è¯»å…¥icsæ–‡ä»¶ä¸­çš„å…¨éƒ¨Componentï¼ˆä¾‹å¦‚<code>VEVENT</code>ã€<code>VTODO</code>ç­‰ï¼‰ï¼Œå¹¶æå–å…¶ä¸­<strong>æœ€è¿‘</strong>çš„æ—¥æœŸï¼ˆå¦‚æœä½ çš„æ—¥å†ä¸­æœ‰æŒç»­æˆ–è€…é‡å¤æ—¶é—´ä¸º<strong>æ°¸è¿œ</strong>çš„è¯·è°¨æ…ä½¿ç”¨ï¼‰ï¼Œå°†å…¶ä¸<code>watershed_datetime</code>æ¯”è¾ƒã€‚è‹¥<code>is_before_watershed_datetime = True</code>ï¼Œåˆ™ä¿å­˜æ¯”<code>watershed_datetime</code>æ›´æ—©çš„Componentï¼Œå¦åˆ™ä¿å­˜æ›´æ–°çš„Componentã€‚</p>
<figure class="highlight python"><figcaption><span>ics_rotate.py</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> icalendar <span class="keyword">import</span> Calendar</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> date, time, datetime</span><br><span class="line"><span class="keyword">import</span> pytz</span><br><span class="line"></span><br><span class="line">uniform_tz = pytz.timezone(<span class="string">&quot;Asia/Shanghai&quot;</span>)</span><br><span class="line">watershed_datetime = datetime(<span class="number">2022</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, tzinfo=uniform_tz)</span><br><span class="line">is_before_watershed_datetime = <span class="literal">True</span>  <span class="comment"># å–äº‹ä»¶æœ€è¿‘æ—¥æœŸï¼Œä¿å­˜åˆ†æ°´å²­å‰/åçš„äº‹ä»¶</span></span><br><span class="line"></span><br><span class="line">read_file_path = <span class="string">&quot;my-calendar.ics&quot;</span></span><br><span class="line">save_file_path = <span class="string">&quot;my-calendar-20220101.ics&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_datetime_from_event</span>(<span class="params">event, param</span>):</span><br><span class="line">    result = event.get(param).dt</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">type</span>(result) == date:</span><br><span class="line">        result = datetime.combine(</span><br><span class="line">            result,</span><br><span class="line">            time(tzinfo=uniform_tz),</span><br><span class="line">        )</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(read_file_path, <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    cal = Calendar.from_ical(f.read())</span><br><span class="line"></span><br><span class="line">new_cal = Calendar()</span><br><span class="line"></span><br><span class="line">param_list = [<span class="string">&quot;dtstart&quot;</span>, <span class="string">&quot;dtend&quot;</span>, <span class="string">&quot;due&quot;</span>, <span class="string">&quot;completed&quot;</span>, <span class="string">&quot;dtstamp&quot;</span>]</span><br><span class="line">watershed_datetime = watershed_datetime.replace(tzinfo=pytz.UTC)</span><br><span class="line"><span class="keyword">for</span> event <span class="keyword">in</span> cal.walk():</span><br><span class="line">    <span class="keyword">if</span> event.name <span class="keyword">not</span> <span class="keyword">in</span> [</span><br><span class="line">        <span class="string">&quot;VEVENT&quot;</span>,</span><br><span class="line">        <span class="string">&quot;VTODO&quot;</span>,</span><br><span class="line">        <span class="string">&quot;VJOURNAL&quot;</span>,</span><br><span class="line">        <span class="string">&quot;VFREEBUSY&quot;</span>,</span><br><span class="line">        <span class="string">&quot;VTIMEZONE&quot;</span>,</span><br><span class="line">        <span class="string">&quot;VALARM&quot;</span>,</span><br><span class="line">    ]:</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    dates = <span class="built_in">list</span>()</span><br><span class="line">    <span class="keyword">for</span> param <span class="keyword">in</span> param_list:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            dates.append(get_datetime_from_event(event, param))</span><br><span class="line">        <span class="keyword">except</span> AttributeError:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(dates) &gt; <span class="number">0</span>:</span><br><span class="line">        event_datetime = <span class="built_in">max</span>(dates).replace(tzinfo=pytz.UTC)</span><br><span class="line">        <span class="keyword">if</span> (</span><br><span class="line">            event_datetime &gt;= watershed_datetime</span><br><span class="line">        ) ^ is_before_watershed_datetime:</span><br><span class="line">            new_cal.add_component(event)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        new_cal.add_component(event)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(save_file_path, <span class="string">&quot;w&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(new_cal.to_ical().decode(<span class="string">&quot;utf-8&quot;</span>).replace(<span class="string">&quot;\r\n&quot;</span>, <span class="string">&quot;\n&quot;</span>).strip())</span><br></pre></td></tr></table></figure>
<hr>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<ul>
<li><a href="https://docs.python.org/3/library/datetime.html">https://docs.python.org/3/library/datetime.html</a></li>
<li><a href="https://github.com/collective/icalendar">https://github.com/collective/icalendar</a></li>
<li><a href="https://datatracker.ietf.org/doc/html/rfc5545">https://datatracker.ietf.org/doc/html/rfc5545</a></li>
</ul>
]]></content>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
</search>
